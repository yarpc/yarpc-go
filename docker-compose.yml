version: '2'

services:
    crossdock:
        image: yarpc/crossdock:behavior-axes
        links:
            - go
            - node
            - java
            - python
            - python-sync
        environment:
            - CROSSDOCK_CLIENTS=go,java,node,python,python-sync
            - CROSSDOCK_AXIS_SERVER=go,java,node,python
            - CROSSDOCK_AXIS_BEHAVIOR=raw,json,thrift
            - CROSSDOCK_AXIS_TRANSPORT=http,tchannel

    go:
        build: .
        ports:
            - "8080-8082"

    node:
        image: yarpc/yarpc-node:crossdock-echo-behaviors
        ports:
            - "8080-8082"

    java:
        image: yarpc/yarpc-java:crossdock-echo-behaviors
        ports:
            - "8080-8082"

    python:
        image: yarpc/yarpc-python:crossdock-echo-behaviors
        ports:
            - "8080:8082"

    python-sync:
        image: yarpc/yarpc-python:crossdock-echo-behaviors
        ports:
            - 8080
        environment:
            - SYNC=1

