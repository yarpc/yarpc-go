required_env_vars:
  - TRANSPORT
client_command: go run client/main.go -outbound $TRANSPORT
server_command: go run server/main.go -inbound $TRANSPORT
sleep_before_client_ms: 500
input: |
  get foo
  set foo bar
  get foo
  set baz qux
  get baz
  exit
output: |
  sending request "get" to service "keyvalue" (encoding "json")
  received a request to "get" from client "keyvalue-client" (encoding "json")
  foo =
  sending request "set" to service "keyvalue" (encoding "json")
  received a request to "set" from client "keyvalue-client" (encoding "json")
  sending request "get" to service "keyvalue" (encoding "json")
  received a request to "get" from client "keyvalue-client" (encoding "json")
  foo = bar
  sending request "set" to service "keyvalue" (encoding "json")
  received a request to "set" from client "keyvalue-client" (encoding "json")
  sending request "get" to service "keyvalue" (encoding "json")
  received a request to "get" from client "keyvalue-client" (encoding "json")
  baz = qux
